 PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX wd: <http://www.wikidata.org/entity/> PREFIX wdt: <http://www.wikidata.org/prop/direct/> PREFIX defaultView: <http://defaultView>    SELECT(SAMPLE(?year) AS ?year_) (COUNT(?_country) AS ?battles)  (SAMPLE(?_countryLabel) AS ?_countryLabel_)  WHERE {   ?subj wdt:P31 wd:Q178561.   OPTIONAL { ?subj wdt:P580 ?d1. }   OPTIONAL { ?subj wdt:P585 ?d2. }   OPTIONAL { ?subj wdt:P582 ?d3. }   BIND(IF(!BOUND(?d1), IF(!BOUND(?d2), ?d3, ?d2), ?d1) AS ?date)   BIND(str(YEAR(?date)) AS ?year)   ?subj wdt:P276 ?_loc.   ?_loc wdt:P17 ?_country.   ?_country rdfs:label ?_countryLabel.   BIND((NOW()) - ?date AS ?distance)   FILTER(BOUND(?year))   FILTER((LANG(?_countryLabel)) = "en")   FILTER((0 <= ?distance) && (?distance < 31 * 12 * 80)) } GROUP BY ?year ?_country ORDER BY ?_countryLabel 